<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PriceScout</title>
    <link rel="stylesheet" href="style.css">
    <script defer src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <script defer src="app.js"></script>
</head>
<body>
    <header class="app-header">
        <h1>PriceScout</h1>
        <p class="tagline">レシート撮影で最安値を追跡</p>
    </header>

    <main>
        <section class="capture-section">
            <h2>1. レシート画像をアップロード</h2>
            <p class="note">対応形式: JPG / PNG (5MBまで)</p>
            <label class="upload-button" for="receiptInput">画像を選択</label>
            <input type="file" id="receiptInput" accept="image/*" hidden>
            <div id="loadingIndicator" class="loading hidden">解析中...</div>
            <textarea id="rawTextOutput" class="raw-text" placeholder="Geminiが返すJSONを表示します。手動で編集してから登録できます。"></textarea>
            <div class="register-actions">
                <button id="registerButton" type="button" class="primary" disabled>JSONを登録</button>
                <small class="register-hint">JSON形式: {"store":"店舗名","items":[{"name":"商品名","price":123}]}</small>
            </div>
        </section>

        <section class="search-section">
            <h2>2. 商品検索</h2>
            <input type="search" id="searchInput" placeholder="商品名・店舗名で検索">
        </section>

        <section class="actions-section">
            <button id="exportButton" type="button">JSONエクスポート</button>
            <label class="import-label">
                JSONインポート
                <input type="file" id="importInput" accept="application/json" hidden>
            </label>
            <button id="clearButton" type="button" class="danger">すべて削除</button>
        </section>

        <section class="list-section">
            <h2>3. 登録済みリスト</h2>
            <table class="product-table">
                <thead>
                    <tr>
                        <th>商品名</th>
                        <th>価格</th>
                        <th>店舗</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody id="productTableBody"></tbody>
            </table>
        </section>
    </main>

    <template id="productRowTemplate">
        <tr>
            <td data-field="name"></td>
            <td data-field="price"></td>
            <td data-field="store"></td>
            <td class="actions">
                <button type="button" data-action="delete" class="danger">削除</button>
            </td>
        </tr>
    </template>
</body>
</html>
